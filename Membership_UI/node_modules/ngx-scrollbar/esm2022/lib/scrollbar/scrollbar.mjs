import { ChangeDetectionStrategy, Component, effect, inject } from '@angular/core';
import { fromPromise } from 'rxjs/internal/observable/innerFrom';
import { TrackXDirective, TrackYDirective } from '../track/track';
import { ThumbXDirective, ThumbYDirective } from '../thumb/thumb';
import { SCROLLBAR_CONTROL, ScrollbarAdapter } from './scrollbar-adapter';
import { ScrollbarButton } from '../button/scrollbar-button.component';
import { ScrollbarManager } from '../utils/scrollbar-manager';
import * as i0 from "@angular/core";
export class ScrollbarY extends ScrollbarAdapter {
    constructor() {
        super(...arguments);
        this.clientRectProperty = 'top';
        this.sizeProperty = 'offsetHeight';
        this.clientProperty = 'clientY';
        this.offsetProperty = 'offsetY';
        this.axis = 'y';
    }
    get viewportScrollMax() {
        return this.cmp.viewport.scrollMaxY;
    }
    get viewportScrollOffset() {
        return this.cmp.viewport.scrollTop;
    }
    scrollTo(top, duration) {
        return fromPromise(this.cmp.scrollTo({ top, duration }));
    }
    instantScrollTo(value) {
        this.cmp.viewport.scrollYTo(value);
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "18.0.1", ngImport: i0, type: ScrollbarY, deps: null, target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "17.0.0", version: "18.0.1", type: ScrollbarY, isStandalone: true, selector: "scrollbar-y", providers: [
            { provide: SCROLLBAR_CONTROL, useExisting: ScrollbarY }
        ], usesInheritance: true, ngImport: i0, template: `
    <div #sticky class="ng-scrollbar-sticky">
      <div class="ng-scrollbar-track-wrapper">
        <div scrollbarTrackY class="ng-scrollbar-track {{ cmp.trackClass }}">
          <div scrollbarThumbY class="ng-scrollbar-thumb {{ cmp.thumbClass }}"></div>
        </div>
        @if (cmp.buttons()) {
          <button class="ng-scrollbar-button {{ cmp.buttonClass }}"
                  scrollbarButton="top"
                  scrollDirection="backward"></button>
          <button class="ng-scrollbar-button {{ cmp.buttonClass }}"
                  scrollbarButton="bottom"
                  scrollDirection="forward"></button>
        }
      </div>
    </div>
  `, isInline: true, styles: [":host{position:absolute;inset:0;pointer-events:none;min-width:calc(var(--viewport-width) * 1px);min-height:calc(var(--viewport-height) * 1px)}.ng-scrollbar-sticky{top:calc(var(--_scrollbar-wrapper-top) * 1px);left:calc(var(--_scrollbar-wrapper-left) * 1px);right:calc(var(--_scrollbar-wrapper-right) * 1px);height:calc(var(--_scrollbar-wrapper-height) * 1px);width:calc(var(--_scrollbar-wrapper-width) * 1px);position:sticky;z-index:100;opacity:var(--_scrollbar-hover-opacity);transition:var(--_scrollbar-opacity-transition)}.ng-scrollbar-track-wrapper{touch-action:none;-webkit-user-select:none;user-select:none;top:var(--_scrollbar-track-top);bottom:var(--_scrollbar-track-bottom);right:var(--_scrollbar-track-right);left:var(--_scrollbar-track-left);pointer-events:var(--_scrollbar-pointer-events);transition:var(--scrollbar-track-wrapper-transition);position:absolute;overflow:hidden;display:flex;place-items:center}.ng-scrollbar-track{position:relative;width:100%;height:100%;background-color:var(--scrollbar-track-color);border-radius:var(--scrollbar-border-radius);cursor:default;z-index:1;order:2}.ng-scrollbar-thumb{box-sizing:border-box;position:absolute;transition:var(--scrollbar-thumb-transition);border-radius:var(--scrollbar-border-radius);height:var(--_thumb-height);width:var(--_thumb-width);animation-name:scrollbarThumbAnimation;animation-duration:1ms;animation-timing-function:linear}@keyframes scrollbarThumbAnimation{0%{translate:var(--_scrollbar-thumb-transform-from)}to{translate:var(--_scrollbar-thumb-transform-to)}}\n", ":host{--_scrollbar-wrapper-top: 0;--_scrollbar-wrapper-left: var(--_scrollbar-wrapper-y-left);--_scrollbar-wrapper-right: var(--_scrollbar-wrapper-y-right);--_scrollbar-wrapper-height: var(--viewport-height);--_scrollbar-wrapper-width: var(--_scrollbar-thickness);--_scrollbar-track-top: var(--_vertical-top);--_scrollbar-track-bottom: var(--_vertical-bottom);--_scrollbar-track-right: var(--_vertical-right);--_scrollbar-track-left: var(--_vertical-left);--_thumb-height: calc(var(--thumb-y-length) * 1px);--_thumb-width: 100%;--_scrollbar-thumb-transform-from: 0 0;--_scrollbar-thumb-transform-to: 0 calc(var(--_scrollbar-y-thumb-transform-to-value) * 1px)}.ng-scrollbar-track-wrapper{width:var(--_track-y-thickness);flex-direction:column}.ng-scrollbar-track-wrapper:hover{--_track-y-thickness: var(--_scrollbar-hover-thickness-px);--_thumb-y-color: var(--scrollbar-thumb-hover-color)}.ng-scrollbar-thumb{animation-timeline:var(--_animation-timeline-y);min-height:calc(var(--scrollbar-thumb-min-size) * 1px);display:var(--_vertical-thumb-display);background-color:var(--_thumb-y-color)}\n"], dependencies: [{ kind: "directive", type: TrackYDirective, selector: "[scrollbarTrackY]" }, { kind: "directive", type: ThumbYDirective, selector: "[scrollbarThumbY]" }, { kind: "component", type: ScrollbarButton, selector: "button[scrollbarButton]", inputs: ["scrollbarButton", "scrollDirection"] }], changeDetection: i0.ChangeDetectionStrategy.OnPush }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "18.0.1", ngImport: i0, type: ScrollbarY, decorators: [{
            type: Component,
            args: [{ standalone: true, selector: 'scrollbar-y', template: `
    <div #sticky class="ng-scrollbar-sticky">
      <div class="ng-scrollbar-track-wrapper">
        <div scrollbarTrackY class="ng-scrollbar-track {{ cmp.trackClass }}">
          <div scrollbarThumbY class="ng-scrollbar-thumb {{ cmp.thumbClass }}"></div>
        </div>
        @if (cmp.buttons()) {
          <button class="ng-scrollbar-button {{ cmp.buttonClass }}"
                  scrollbarButton="top"
                  scrollDirection="backward"></button>
          <button class="ng-scrollbar-button {{ cmp.buttonClass }}"
                  scrollbarButton="bottom"
                  scrollDirection="forward"></button>
        }
      </div>
    </div>
  `, imports: [TrackYDirective, ThumbYDirective, ScrollbarButton], providers: [
                        { provide: SCROLLBAR_CONTROL, useExisting: ScrollbarY }
                    ], changeDetection: ChangeDetectionStrategy.OnPush, styles: [":host{position:absolute;inset:0;pointer-events:none;min-width:calc(var(--viewport-width) * 1px);min-height:calc(var(--viewport-height) * 1px)}.ng-scrollbar-sticky{top:calc(var(--_scrollbar-wrapper-top) * 1px);left:calc(var(--_scrollbar-wrapper-left) * 1px);right:calc(var(--_scrollbar-wrapper-right) * 1px);height:calc(var(--_scrollbar-wrapper-height) * 1px);width:calc(var(--_scrollbar-wrapper-width) * 1px);position:sticky;z-index:100;opacity:var(--_scrollbar-hover-opacity);transition:var(--_scrollbar-opacity-transition)}.ng-scrollbar-track-wrapper{touch-action:none;-webkit-user-select:none;user-select:none;top:var(--_scrollbar-track-top);bottom:var(--_scrollbar-track-bottom);right:var(--_scrollbar-track-right);left:var(--_scrollbar-track-left);pointer-events:var(--_scrollbar-pointer-events);transition:var(--scrollbar-track-wrapper-transition);position:absolute;overflow:hidden;display:flex;place-items:center}.ng-scrollbar-track{position:relative;width:100%;height:100%;background-color:var(--scrollbar-track-color);border-radius:var(--scrollbar-border-radius);cursor:default;z-index:1;order:2}.ng-scrollbar-thumb{box-sizing:border-box;position:absolute;transition:var(--scrollbar-thumb-transition);border-radius:var(--scrollbar-border-radius);height:var(--_thumb-height);width:var(--_thumb-width);animation-name:scrollbarThumbAnimation;animation-duration:1ms;animation-timing-function:linear}@keyframes scrollbarThumbAnimation{0%{translate:var(--_scrollbar-thumb-transform-from)}to{translate:var(--_scrollbar-thumb-transform-to)}}\n", ":host{--_scrollbar-wrapper-top: 0;--_scrollbar-wrapper-left: var(--_scrollbar-wrapper-y-left);--_scrollbar-wrapper-right: var(--_scrollbar-wrapper-y-right);--_scrollbar-wrapper-height: var(--viewport-height);--_scrollbar-wrapper-width: var(--_scrollbar-thickness);--_scrollbar-track-top: var(--_vertical-top);--_scrollbar-track-bottom: var(--_vertical-bottom);--_scrollbar-track-right: var(--_vertical-right);--_scrollbar-track-left: var(--_vertical-left);--_thumb-height: calc(var(--thumb-y-length) * 1px);--_thumb-width: 100%;--_scrollbar-thumb-transform-from: 0 0;--_scrollbar-thumb-transform-to: 0 calc(var(--_scrollbar-y-thumb-transform-to-value) * 1px)}.ng-scrollbar-track-wrapper{width:var(--_track-y-thickness);flex-direction:column}.ng-scrollbar-track-wrapper:hover{--_track-y-thickness: var(--_scrollbar-hover-thickness-px);--_thumb-y-color: var(--scrollbar-thumb-hover-color)}.ng-scrollbar-thumb{animation-timeline:var(--_animation-timeline-y);min-height:calc(var(--scrollbar-thumb-min-size) * 1px);display:var(--_vertical-thumb-display);background-color:var(--_thumb-y-color)}\n"] }]
        }] });
export class ScrollbarX extends ScrollbarAdapter {
    get viewportScrollMax() {
        return this.cmp.viewport.scrollMaxX;
    }
    get viewportScrollOffset() {
        // Keep scrollLeft value positive for horizontal scrollbar
        return Math.abs(this.cmp.viewport.scrollLeft);
    }
    constructor() {
        effect(() => {
            if (this.cmp.direction() === 'rtl') {
                this.handlePosition = (position, scrollMax) => -(scrollMax - position);
            }
            else {
                this.handlePosition = (position) => position;
            }
        });
        super();
        this.manager = inject(ScrollbarManager);
        this.clientRectProperty = 'left';
        this.sizeProperty = 'offsetWidth';
        this.clientProperty = 'clientX';
        this.offsetProperty = 'offsetX';
        this.axis = 'x';
    }
    scrollTo(left, duration) {
        return fromPromise(this.cmp.scrollTo({ left, duration }));
    }
    instantScrollTo(value, scrollMax) {
        this.cmp.viewport.scrollXTo(this.handlePosition(value, scrollMax));
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "18.0.1", ngImport: i0, type: ScrollbarX, deps: [], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "17.0.0", version: "18.0.1", type: ScrollbarX, isStandalone: true, selector: "scrollbar-x", host: { properties: { "attr.dir": "cmp.direction()" } }, providers: [
            { provide: SCROLLBAR_CONTROL, useExisting: ScrollbarX }
        ], usesInheritance: true, ngImport: i0, template: `
    <div #sticky class="ng-scrollbar-sticky">
      <div class="ng-scrollbar-track-wrapper">
        <div scrollbarTrackX class="ng-scrollbar-track {{ cmp.trackClass }}">
          <div scrollbarThumbX class="ng-scrollbar-thumb {{ cmp.thumbClass }}"></div>
        </div>
        @if (cmp.buttons()) {
          <button class="ng-scrollbar-button {{ cmp.buttonClass }}"
                  scrollbarButton="start"
                  scrollDirection="backward"></button>
          <button class="ng-scrollbar-button {{ cmp.buttonClass }}"
                  scrollbarButton="end"
                  scrollDirection="forward"></button>
        }
      </div>
    </div>
  `, isInline: true, styles: [":host{position:absolute;inset:0;pointer-events:none;min-width:calc(var(--viewport-width) * 1px);min-height:calc(var(--viewport-height) * 1px)}.ng-scrollbar-sticky{top:calc(var(--_scrollbar-wrapper-top) * 1px);left:calc(var(--_scrollbar-wrapper-left) * 1px);right:calc(var(--_scrollbar-wrapper-right) * 1px);height:calc(var(--_scrollbar-wrapper-height) * 1px);width:calc(var(--_scrollbar-wrapper-width) * 1px);position:sticky;z-index:100;opacity:var(--_scrollbar-hover-opacity);transition:var(--_scrollbar-opacity-transition)}.ng-scrollbar-track-wrapper{touch-action:none;-webkit-user-select:none;user-select:none;top:var(--_scrollbar-track-top);bottom:var(--_scrollbar-track-bottom);right:var(--_scrollbar-track-right);left:var(--_scrollbar-track-left);pointer-events:var(--_scrollbar-pointer-events);transition:var(--scrollbar-track-wrapper-transition);position:absolute;overflow:hidden;display:flex;place-items:center}.ng-scrollbar-track{position:relative;width:100%;height:100%;background-color:var(--scrollbar-track-color);border-radius:var(--scrollbar-border-radius);cursor:default;z-index:1;order:2}.ng-scrollbar-thumb{box-sizing:border-box;position:absolute;transition:var(--scrollbar-thumb-transition);border-radius:var(--scrollbar-border-radius);height:var(--_thumb-height);width:var(--_thumb-width);animation-name:scrollbarThumbAnimation;animation-duration:1ms;animation-timing-function:linear}@keyframes scrollbarThumbAnimation{0%{translate:var(--_scrollbar-thumb-transform-from)}to{translate:var(--_scrollbar-thumb-transform-to)}}\n", ":host{--_scrollbar-wrapper-top: var(--_scrollbar-wrapper-x-top);--_scrollbar-wrapper-left: 0;--_scrollbar-wrapper-right: 0;--_scrollbar-wrapper-height: var(--_scrollbar-thickness);--_scrollbar-wrapper-width: var(--viewport-width);--_scrollbar-track-top: var(--_horizontal-top);--_scrollbar-track-bottom: var(--_horizontal-bottom);--_scrollbar-track-right: var(--_horizontal-right);--_scrollbar-track-left: var(--_horizontal-left);--_thumb-height: 100%;--_thumb-width: calc(var(--thumb-x-length) * 1px);--_scrollbar-thumb-transform-from: 0;--_scrollbar-thumb-transform-to: calc(var(--_scrollbar-x-thumb-transform-to-value) * 1px)}:host .ng-scrollbar-button[scrollbarButton=start]{_--button-rotate:90}:host .ng-scrollbar-button[scrollbarButton=end]{_--button-rotate:-90}:host[dir=rtl] .ng-scrollbar-thumb{animation-name:scrollbarThumbRTLAnimation;will-change:right;--_scrollbar-thumb-transform-to: calc(var(--_scrollbar-x-thumb-transform-to-value) * -1px)}:host[dir=rtl] .ng-scrollbar-button[scrollbarButton=start]{--_button-rotate: 90deg}:host[dir=rtl] .ng-scrollbar-button[scrollbarButton=end]{--_button-rotate: -90deg}.ng-scrollbar-track-wrapper{height:var(--_track-x-thickness);flex-direction:row}.ng-scrollbar-track-wrapper:hover{--_track-x-thickness: var(--_scrollbar-hover-thickness-px);--_thumb-x-color: var(--scrollbar-thumb-hover-color)}.ng-scrollbar-thumb{animation-timeline:var(--_animation-timeline-x);min-width:calc(var(--scrollbar-thumb-min-size) * 1px);display:var(--_horizontal-thumb-display);background-color:var(--_thumb-x-color)}@keyframes scrollbarThumbRTLAnimation{0%{right:var(--_scrollbar-thumb-transform-from)}to{right:calc(var(--_scrollbar-thumb-transform-to) * -1)}}\n"], dependencies: [{ kind: "directive", type: TrackXDirective, selector: "[scrollbarTrackX]" }, { kind: "directive", type: ThumbXDirective, selector: "[scrollbarThumbX]" }, { kind: "component", type: ScrollbarButton, selector: "button[scrollbarButton]", inputs: ["scrollbarButton", "scrollDirection"] }], changeDetection: i0.ChangeDetectionStrategy.OnPush }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "18.0.1", ngImport: i0, type: ScrollbarX, decorators: [{
            type: Component,
            args: [{ standalone: true, selector: 'scrollbar-x', host: { '[attr.dir]': 'cmp.direction()' }, template: `
    <div #sticky class="ng-scrollbar-sticky">
      <div class="ng-scrollbar-track-wrapper">
        <div scrollbarTrackX class="ng-scrollbar-track {{ cmp.trackClass }}">
          <div scrollbarThumbX class="ng-scrollbar-thumb {{ cmp.thumbClass }}"></div>
        </div>
        @if (cmp.buttons()) {
          <button class="ng-scrollbar-button {{ cmp.buttonClass }}"
                  scrollbarButton="start"
                  scrollDirection="backward"></button>
          <button class="ng-scrollbar-button {{ cmp.buttonClass }}"
                  scrollbarButton="end"
                  scrollDirection="forward"></button>
        }
      </div>
    </div>
  `, imports: [TrackXDirective, ThumbXDirective, ScrollbarButton], providers: [
                        { provide: SCROLLBAR_CONTROL, useExisting: ScrollbarX }
                    ], changeDetection: ChangeDetectionStrategy.OnPush, styles: [":host{position:absolute;inset:0;pointer-events:none;min-width:calc(var(--viewport-width) * 1px);min-height:calc(var(--viewport-height) * 1px)}.ng-scrollbar-sticky{top:calc(var(--_scrollbar-wrapper-top) * 1px);left:calc(var(--_scrollbar-wrapper-left) * 1px);right:calc(var(--_scrollbar-wrapper-right) * 1px);height:calc(var(--_scrollbar-wrapper-height) * 1px);width:calc(var(--_scrollbar-wrapper-width) * 1px);position:sticky;z-index:100;opacity:var(--_scrollbar-hover-opacity);transition:var(--_scrollbar-opacity-transition)}.ng-scrollbar-track-wrapper{touch-action:none;-webkit-user-select:none;user-select:none;top:var(--_scrollbar-track-top);bottom:var(--_scrollbar-track-bottom);right:var(--_scrollbar-track-right);left:var(--_scrollbar-track-left);pointer-events:var(--_scrollbar-pointer-events);transition:var(--scrollbar-track-wrapper-transition);position:absolute;overflow:hidden;display:flex;place-items:center}.ng-scrollbar-track{position:relative;width:100%;height:100%;background-color:var(--scrollbar-track-color);border-radius:var(--scrollbar-border-radius);cursor:default;z-index:1;order:2}.ng-scrollbar-thumb{box-sizing:border-box;position:absolute;transition:var(--scrollbar-thumb-transition);border-radius:var(--scrollbar-border-radius);height:var(--_thumb-height);width:var(--_thumb-width);animation-name:scrollbarThumbAnimation;animation-duration:1ms;animation-timing-function:linear}@keyframes scrollbarThumbAnimation{0%{translate:var(--_scrollbar-thumb-transform-from)}to{translate:var(--_scrollbar-thumb-transform-to)}}\n", ":host{--_scrollbar-wrapper-top: var(--_scrollbar-wrapper-x-top);--_scrollbar-wrapper-left: 0;--_scrollbar-wrapper-right: 0;--_scrollbar-wrapper-height: var(--_scrollbar-thickness);--_scrollbar-wrapper-width: var(--viewport-width);--_scrollbar-track-top: var(--_horizontal-top);--_scrollbar-track-bottom: var(--_horizontal-bottom);--_scrollbar-track-right: var(--_horizontal-right);--_scrollbar-track-left: var(--_horizontal-left);--_thumb-height: 100%;--_thumb-width: calc(var(--thumb-x-length) * 1px);--_scrollbar-thumb-transform-from: 0;--_scrollbar-thumb-transform-to: calc(var(--_scrollbar-x-thumb-transform-to-value) * 1px)}:host .ng-scrollbar-button[scrollbarButton=start]{_--button-rotate:90}:host .ng-scrollbar-button[scrollbarButton=end]{_--button-rotate:-90}:host[dir=rtl] .ng-scrollbar-thumb{animation-name:scrollbarThumbRTLAnimation;will-change:right;--_scrollbar-thumb-transform-to: calc(var(--_scrollbar-x-thumb-transform-to-value) * -1px)}:host[dir=rtl] .ng-scrollbar-button[scrollbarButton=start]{--_button-rotate: 90deg}:host[dir=rtl] .ng-scrollbar-button[scrollbarButton=end]{--_button-rotate: -90deg}.ng-scrollbar-track-wrapper{height:var(--_track-x-thickness);flex-direction:row}.ng-scrollbar-track-wrapper:hover{--_track-x-thickness: var(--_scrollbar-hover-thickness-px);--_thumb-x-color: var(--scrollbar-thumb-hover-color)}.ng-scrollbar-thumb{animation-timeline:var(--_animation-timeline-x);min-width:calc(var(--scrollbar-thumb-min-size) * 1px);display:var(--_horizontal-thumb-display);background-color:var(--_thumb-x-color)}@keyframes scrollbarThumbRTLAnimation{0%{right:var(--_scrollbar-thumb-transform-from)}to{right:calc(var(--_scrollbar-thumb-transform-to) * -1)}}\n"] }]
        }], ctorParameters: () => [] });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2Nyb2xsYmFyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvbmd4LXNjcm9sbGJhci9zcmMvbGliL3Njcm9sbGJhci9zY3JvbGxiYXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLHVCQUF1QixFQUFFLFNBQVMsRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBRW5GLE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSxvQ0FBb0MsQ0FBQztBQUNqRSxPQUFPLEVBQUUsZUFBZSxFQUFFLGVBQWUsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBQ2xFLE9BQU8sRUFBRSxlQUFlLEVBQUUsZUFBZSxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDbEUsT0FBTyxFQUFFLGlCQUFpQixFQUFFLGdCQUFnQixFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFDMUUsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLHNDQUFzQyxDQUFDO0FBQ3ZFLE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLDRCQUE0QixDQUFDOztBQTZCOUQsTUFBTSxPQUFPLFVBQVcsU0FBUSxnQkFBZ0I7SUEzQmhEOztRQTZCVyx1QkFBa0IsR0FBbUIsS0FBSyxDQUFDO1FBRTNDLGlCQUFZLEdBQW1DLGNBQWMsQ0FBQztRQUU5RCxtQkFBYyxHQUEwQixTQUFTLENBQUM7UUFFbEQsbUJBQWMsR0FBMEIsU0FBUyxDQUFDO1FBRWxELFNBQUksR0FBYyxHQUFHLENBQUM7S0FpQmhDO0lBZkMsSUFBSSxpQkFBaUI7UUFDbkIsT0FBTyxJQUFJLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUM7SUFDdEMsQ0FBQztJQUVELElBQUksb0JBQW9CO1FBQ3RCLE9BQU8sSUFBSSxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDO0lBQ3JDLENBQUM7SUFFRCxRQUFRLENBQUMsR0FBVyxFQUFFLFFBQWdC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Ozs7Ozs7Ozs7Ozs7Ozs7R0FnQlQsV0FFUSxDQUFDLGVBQWUsRUFBRSxlQUFlLEVBQUUsZUFBZSxDQUFDLGFBQ2pEO3dCQUNULEVBQUUsT0FBTyxFQUFFLGlCQUFpQixFQUFFLFdBQVcsWUFBWSxFQUFFO3FCQUN4RCxtQkFDZ0IsdUJBQXVCLENBQUMsTUFBTSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENoYW5nZURldGVjdGlvblN0cmF0ZWd5LCBDb21wb25lbnQsIGVmZmVjdCwgaW5qZWN0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IE9ic2VydmFibGUgfSBmcm9tICdyeGpzJztcclxuaW1wb3J0IHsgZnJvbVByb21pc2UgfSBmcm9tICdyeGpzL2ludGVybmFsL29ic2VydmFibGUvaW5uZXJGcm9tJztcclxuaW1wb3J0IHsgVHJhY2tYRGlyZWN0aXZlLCBUcmFja1lEaXJlY3RpdmUgfSBmcm9tICcuLi90cmFjay90cmFjayc7XHJcbmltcG9ydCB7IFRodW1iWERpcmVjdGl2ZSwgVGh1bWJZRGlyZWN0aXZlIH0gZnJvbSAnLi4vdGh1bWIvdGh1bWInO1xyXG5pbXBvcnQgeyBTQ1JPTExCQVJfQ09OVFJPTCwgU2Nyb2xsYmFyQWRhcHRlciB9IGZyb20gJy4vc2Nyb2xsYmFyLWFkYXB0ZXInO1xyXG5pbXBvcnQgeyBTY3JvbGxiYXJCdXR0b24gfSBmcm9tICcuLi9idXR0b24vc2Nyb2xsYmFyLWJ1dHRvbi5jb21wb25lbnQnO1xyXG5pbXBvcnQgeyBTY3JvbGxiYXJNYW5hZ2VyIH0gZnJvbSAnLi4vdXRpbHMvc2Nyb2xsYmFyLW1hbmFnZXInO1xyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgc3RhbmRhbG9uZTogdHJ1ZSxcclxuICBzZWxlY3RvcjogJ3Njcm9sbGJhci15JyxcclxuICB0ZW1wbGF0ZTogYFxyXG4gICAgPGRpdiAjc3RpY2t5IGNsYXNzPVwibmctc2Nyb2xsYmFyLXN0aWNreVwiPlxyXG4gICAgICA8ZGl2IGNsYXNzPVwibmctc2Nyb2xsYmFyLXRyYWNrLXdyYXBwZXJcIj5cclxuICAgICAgICA8ZGl2IHNjcm9sbGJhclRyYWNrWSBjbGFzcz1cIm5nLXNjcm9sbGJhci10cmFjayB7eyBjbXAudHJhY2tDbGFzcyB9fVwiPlxyXG4gICAgICAgICAgPGRpdiBzY3JvbGxiYXJUaHVtYlkgY2xhc3M9XCJuZy1zY3JvbGxiYXItdGh1bWIge3sgY21wLnRodW1iQ2xhc3MgfX1cIj48L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICBAaWYgKGNtcC5idXR0b25zKCkpIHtcclxuICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJuZy1zY3JvbGxiYXItYnV0dG9uIHt7IGNtcC5idXR0b25DbGFzcyB9fVwiXHJcbiAgICAgICAgICAgICAgICAgIHNjcm9sbGJhckJ1dHRvbj1cInRvcFwiXHJcbiAgICAgICAgICAgICAgICAgIHNjcm9sbERpcmVjdGlvbj1cImJhY2t3YXJkXCI+PC9idXR0b24+XHJcbiAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwibmctc2Nyb2xsYmFyLWJ1dHRvbiB7eyBjbXAuYnV0dG9uQ2xhc3MgfX1cIlxyXG4gICAgICAgICAgICAgICAgICBzY3JvbGxiYXJCdXR0b249XCJib3R0b21cIlxyXG4gICAgICAgICAgICAgICAgICBzY3JvbGxEaXJlY3Rpb249XCJmb3J3YXJkXCI+PC9idXR0b24+XHJcbiAgICAgICAgfVxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PlxyXG4gIGAsXHJcbiAgc3R5bGVVcmxzOiBbJy4vc2hhcmVkLnNjc3MnLCAnLi92ZXJ0aWNhbC5zY3NzJ10sXHJcbiAgaW1wb3J0czogW1RyYWNrWURpcmVjdGl2ZSwgVGh1bWJZRGlyZWN0aXZlLCBTY3JvbGxiYXJCdXR0b25dLFxyXG4gIHByb3ZpZGVyczogW1xyXG4gICAgeyBwcm92aWRlOiBTQ1JPTExCQVJfQ09OVFJPTCwgdXNlRXhpc3Rpbmc6IFNjcm9sbGJhclkgfVxyXG4gIF0sXHJcbiAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2hcclxufSlcclxuZXhwb3J0IGNsYXNzIFNjcm9sbGJhclkgZXh0ZW5kcyBTY3JvbGxiYXJBZGFwdGVyIHtcclxuXHJcbiAgcmVhZG9ubHkgY2xpZW50UmVjdFByb3BlcnR5OiAnbGVmdCcgfCAndG9wJyA9ICd0b3AnO1xyXG5cclxuICByZWFkb25seSBzaXplUHJvcGVydHk6ICdvZmZzZXRXaWR0aCcgfCAnb2Zmc2V0SGVpZ2h0JyA9ICdvZmZzZXRIZWlnaHQnO1xyXG5cclxuICByZWFkb25seSBjbGllbnRQcm9wZXJ0eTogJ2NsaWVudFgnIHwgJ2NsaWVudFknID0gJ2NsaWVudFknO1xyXG5cclxuICByZWFkb25seSBvZmZzZXRQcm9wZXJ0eTogJ29mZnNldFgnIHwgJ29mZnNldFknID0gJ29mZnNldFknO1xyXG5cclxuICByZWFkb25seSBheGlzOiAneCcgfCAneScgPSAneSc7XHJcblxyXG4gIGdldCB2aWV3cG9ydFNjcm9sbE1heCgpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIHRoaXMuY21wLnZpZXdwb3J0LnNjcm9sbE1heFk7XHJcbiAgfVxyXG5cclxuICBnZXQgdmlld3BvcnRTY3JvbGxPZmZzZXQoKTogbnVtYmVyIHtcclxuICAgIHJldHVybiB0aGlzLmNtcC52aWV3cG9ydC5zY3JvbGxUb3A7XHJcbiAgfVxyXG5cclxuICBzY3JvbGxUbyh0b3A6IG51bWJlciwgZHVyYXRpb246IG51bWJlcik6IE9ic2VydmFibGU8dm9pZD4ge1xyXG4gICAgcmV0dXJuIGZyb21Qcm9taXNlKHRoaXMuY21wLnNjcm9sbFRvKHsgdG9wLCBkdXJhdGlvbiB9KSk7XHJcbiAgfVxyXG5cclxuICBpbnN0YW50U2Nyb2xsVG8odmFsdWU6IG51bWJlcik6IHZvaWQge1xyXG4gICAgdGhpcy5jbXAudmlld3BvcnQuc2Nyb2xsWVRvKHZhbHVlKTtcclxuICB9XHJcbn1cclxuXHJcbkBDb21wb25lbnQoe1xyXG4gIHN0YW5kYWxvbmU6IHRydWUsXHJcbiAgc2VsZWN0b3I6ICdzY3JvbGxiYXIteCcsXHJcbiAgaG9zdDogeyAnW2F0dHIuZGlyXSc6ICdjbXAuZGlyZWN0aW9uKCknIH0sXHJcbiAgdGVtcGxhdGU6IGBcclxuICAgIDxkaXYgI3N0aWNreSBjbGFzcz1cIm5nLXNjcm9sbGJhci1zdGlja3lcIj5cclxuICAgICAgPGRpdiBjbGFzcz1cIm5nLXNjcm9sbGJhci10cmFjay13cmFwcGVyXCI+XHJcbiAgICAgICAgPGRpdiBzY3JvbGxiYXJUcmFja1ggY2xhc3M9XCJuZy1zY3JvbGxiYXItdHJhY2sge3sgY21wLnRyYWNrQ2xhc3MgfX1cIj5cclxuICAgICAgICAgIDxkaXYgc2Nyb2xsYmFyVGh1bWJYIGNsYXNzPVwibmctc2Nyb2xsYmFyLXRodW1iIHt7IGNtcC50aHVtYkNsYXNzIH19XCI+PC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgQGlmIChjbXAuYnV0dG9ucygpKSB7XHJcbiAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwibmctc2Nyb2xsYmFyLWJ1dHRvbiB7eyBjbXAuYnV0dG9uQ2xhc3MgfX1cIlxyXG4gICAgICAgICAgICAgICAgICBzY3JvbGxiYXJCdXR0b249XCJzdGFydFwiXHJcbiAgICAgICAgICAgICAgICAgIHNjcm9sbERpcmVjdGlvbj1cImJhY2t3YXJkXCI+PC9idXR0b24+XHJcbiAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwibmctc2Nyb2xsYmFyLWJ1dHRvbiB7eyBjbXAuYnV0dG9uQ2xhc3MgfX1cIlxyXG4gICAgICAgICAgICAgICAgICBzY3JvbGxiYXJCdXR0b249XCJlbmRcIlxyXG4gICAgICAgICAgICAgICAgICBzY3JvbGxEaXJlY3Rpb249XCJmb3J3YXJkXCI+PC9idXR0b24+XHJcbiAgICAgICAgfVxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PlxyXG4gIGAsXHJcbiAgc3R5bGVVcmxzOiBbJy4vc2hhcmVkLnNjc3MnLCAnLi9ob3Jpem9udGFsLnNjc3MnXSxcclxuICBpbXBvcnRzOiBbVHJhY2tYRGlyZWN0aXZlLCBUaHVtYlhEaXJlY3RpdmUsIFNjcm9sbGJhckJ1dHRvbl0sXHJcbiAgcHJvdmlkZXJzOiBbXHJcbiAgICB7IHByb3ZpZGU6IFNDUk9MTEJBUl9DT05UUk9MLCB1c2VFeGlzdGluZzogU2Nyb2xsYmFyWCB9XHJcbiAgXSxcclxuICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaFxyXG59KVxyXG5leHBvcnQgY2xhc3MgU2Nyb2xsYmFyWCBleHRlbmRzIFNjcm9sbGJhckFkYXB0ZXIge1xyXG5cclxuICByZWFkb25seSBtYW5hZ2VyOiBTY3JvbGxiYXJNYW5hZ2VyID0gaW5qZWN0KFNjcm9sbGJhck1hbmFnZXIpO1xyXG5cclxuICByZWFkb25seSBjbGllbnRSZWN0UHJvcGVydHk6ICdsZWZ0JyB8ICd0b3AnID0gJ2xlZnQnO1xyXG5cclxuICByZWFkb25seSBzaXplUHJvcGVydHk6ICdvZmZzZXRXaWR0aCcgfCAnb2Zmc2V0SGVpZ2h0JyA9ICdvZmZzZXRXaWR0aCc7XHJcblxyXG4gIHJlYWRvbmx5IGNsaWVudFByb3BlcnR5OiAnY2xpZW50WCcgfCAnY2xpZW50WScgPSAnY2xpZW50WCc7XHJcblxyXG4gIHJlYWRvbmx5IG9mZnNldFByb3BlcnR5OiAnb2Zmc2V0WCcgfCAnb2Zmc2V0WScgPSAnb2Zmc2V0WCc7XHJcblxyXG4gIHJlYWRvbmx5IGF4aXM6ICd4JyB8ICd5JyA9ICd4JztcclxuXHJcbiAgLy8gSGFuZGxlIGRyYWdnaW5nIHBvc2l0aW9uIChTdXBwb3J0IExUUiBhbmQgUlRMIGRpcmVjdGlvbnMgZm9yIHRoZSBob3Jpem9udGFsIHNjcm9sbGJhcilcclxuICBwcml2YXRlIGhhbmRsZVBvc2l0aW9uOiAodmFsdWU6IG51bWJlciwgc2Nyb2xsTWF4OiBudW1iZXIpID0+IG51bWJlcjtcclxuXHJcbiAgZ2V0IHZpZXdwb3J0U2Nyb2xsTWF4KCk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gdGhpcy5jbXAudmlld3BvcnQuc2Nyb2xsTWF4WDtcclxuICB9XHJcblxyXG4gIGdldCB2aWV3cG9ydFNjcm9sbE9mZnNldCgpOiBudW1iZXIge1xyXG4gICAgLy8gS2VlcCBzY3JvbGxMZWZ0IHZhbHVlIHBvc2l0aXZlIGZvciBob3Jpem9udGFsIHNjcm9sbGJhclxyXG4gICAgcmV0dXJuIE1hdGguYWJzKHRoaXMuY21wLnZpZXdwb3J0LnNjcm9sbExlZnQpO1xyXG4gIH1cclxuXHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICBlZmZlY3QoKCkgPT4ge1xyXG4gICAgICBpZiAodGhpcy5jbXAuZGlyZWN0aW9uKCkgPT09ICdydGwnKSB7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVQb3NpdGlvbiA9IChwb3NpdGlvbjogbnVtYmVyLCBzY3JvbGxNYXg6IG51bWJlcik6IG51bWJlciA9PiAtKHNjcm9sbE1heCAtIHBvc2l0aW9uKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLmhhbmRsZVBvc2l0aW9uID0gKHBvc2l0aW9uOiBudW1iZXIpOiBudW1iZXIgPT4gcG9zaXRpb247XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgc3VwZXIoKTtcclxuICB9XHJcblxyXG4gIHNjcm9sbFRvKGxlZnQ6IG51bWJlciwgZHVyYXRpb246IG51bWJlcik6IE9ic2VydmFibGU8dm9pZD4ge1xyXG4gICAgcmV0dXJuIGZyb21Qcm9taXNlKHRoaXMuY21wLnNjcm9sbFRvKHsgbGVmdCwgZHVyYXRpb24gfSkpO1xyXG4gIH1cclxuXHJcbiAgaW5zdGFudFNjcm9sbFRvKHZhbHVlOiBudW1iZXIsIHNjcm9sbE1heD86IG51bWJlcik6IHZvaWQge1xyXG4gICAgdGhpcy5jbXAudmlld3BvcnQuc2Nyb2xsWFRvKHRoaXMuaGFuZGxlUG9zaXRpb24odmFsdWUsIHNjcm9sbE1heCkpO1xyXG4gIH1cclxufVxyXG4iXX0=